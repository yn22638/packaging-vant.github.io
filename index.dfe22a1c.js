import{e,n as l,t as a,m as o,g as t,ai as n,aH as s,ak as i,b as u,p as r,h as d,at as c,J as m,H as p,L as v,f as h,ag as b,A as g,i as f,I as V,aP as k,j as S,au as y,ao as x,Y as C,s as w,v as B,G as P,N as z,q as T,W as _,ax as E,aQ as G,M,aJ as I,T as F,Z as A,aK as N,ap as j,a0 as H,o as U,c as L,w as q,a as D,d as O}from"./index.51c74a41.js";import{B as W}from"./index.4ad5c476.js";import{S as R}from"./index.bf99594e.js";import{F as X}from"./index.a7865867.js";import{u as Y}from"./use-refs.949e03e4.js";const[$,J]=e("form");const K=d(t({name:$,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:l,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:a,validateTrigger:o("onBlur"),showErrorMessage:a,errorMessageAlign:String},emits:["submit","failed"],setup(e,{emit:l,slots:a}){const{children:o,linkChildren:t}=n(s),d=e=>e?o.filter((l=>e.includes(l.name))):o,c=l=>{return"string"==typeof l?(e=>{const l=o.find((l=>l.name===e));return l?new Promise(((e,a)=>{l.validate().then((l=>{l?a(l):e()}))})):Promise.reject()})(l):e.validateFirst?(a=l,new Promise(((e,l)=>{const o=[];d(a).reduce(((e,l)=>e.then((()=>{if(!o.length)return l.validate().then((e=>{e&&o.push(e)}))}))),Promise.resolve()).then((()=>{o.length?l(o):e()}))}))):(e=>new Promise(((l,a)=>{const o=d(e);Promise.all(o.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?a(e):l()}))})))(l);var a},m=(e,l)=>{o.some((a=>a.name===e&&(a.$el.scrollIntoView(l),!0)))},p=()=>o.reduce(((e,l)=>(e[l.name]=l.formValue.value,e)),{}),v=()=>{const a=p();c().then((()=>l("submit",a))).catch((o=>{l("failed",{values:a,errors:o}),e.scrollToError&&o[0].name&&m(o[0].name)}))},h=e=>{r(e),v()};return t({props:e}),i({submit:v,validate:c,getValues:p,scrollToField:m,resetValidation:e=>{"string"==typeof e&&(e=[e]);d(e).forEach((e=>{e.resetValidation()}))}}),()=>{var e;return u("form",{class:J(),onSubmit:h},[null==(e=a.default)?void 0:e.call(a)])}}})),[Q,Z]=e("switch");const ee=d(t({name:Q,props:{size:l,loading:Boolean,disabled:Boolean,modelValue:c,activeColor:String,inactiveColor:String,activeValue:{type:c,default:!0},inactiveValue:{type:c,default:!1}},emits:["change","update:modelValue"],setup(e,{emit:l}){const a=()=>e.modelValue===e.activeValue,o=()=>{if(!e.disabled&&!e.loading){const o=a()?e.inactiveValue:e.activeValue;l("update:modelValue",o),l("change",o)}},t=()=>{if(e.loading){const l=a()?e.activeColor:e.inactiveColor;return u(v,{class:Z("loading"),color:l},null)}};return m((()=>e.modelValue)),()=>{const{size:l,loading:n,disabled:s,activeColor:i,inactiveColor:r}=e,d=a(),c={fontSize:p(l),backgroundColor:d?i:r};return u("div",{role:"switch",class:Z({on:d,loading:n,disabled:s}),style:c,tabindex:s?void 0:0,"aria-checked":d,onClick:o},[u("div",{class:Z("node")},[t()])])}}})),le={name:c,shape:o("round"),disabled:Boolean,iconSize:l,modelValue:c,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var ae=t({props:h({},le,{bem:b(Function),role:String,parent:Object,checked:Boolean,bindGroup:a}),emits:["click","toggle"],setup(e,{emit:l,slots:a}){const o=g(),t=l=>{if(e.parent&&e.bindGroup)return e.parent.props[l]},n=f((()=>t("disabled")||e.disabled)),s=f((()=>t("direction"))),i=f((()=>{const l=e.checkedColor||t("checkedColor");if(l&&e.checked&&!n.value)return{borderColor:l,backgroundColor:l}})),r=a=>{const{target:t}=a,s=o.value,i=s===t||(null==s?void 0:s.contains(t));n.value||!i&&e.labelDisabled||l("toggle"),l("click",a)},d=()=>{const{bem:l,shape:s,checked:r}=e,d=e.iconSize||t("iconSize");return u("div",{ref:o,class:l("icon",[s,{disabled:n.value,checked:r}]),style:{fontSize:p(d)}},[a.icon?a.icon({checked:r,disabled:n.value}):u(V,{name:"success",style:i.value},null)])},c=()=>{if(a.default)return u("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[a.default()])};return()=>{const l="left"===e.labelPosition?[c(),d()]:[d(),c()];return u("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},s.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:r},[l])}}});const[oe,te]=e("checkbox-group"),ne={max:l,disabled:Boolean,iconSize:l,direction:String,modelValue:k(),checkedColor:String},se=Symbol(oe);var ie=t({name:oe,props:ne,emits:["change","update:modelValue"],setup(e,{emit:l,slots:a}){const{children:o,linkChildren:t}=n(se),s=e=>l("update:modelValue",e);return S((()=>e.modelValue),(e=>l("change",e))),i({toggleAll:(e={})=>{"boolean"==typeof e&&(e={checked:e});const{checked:l,skipDisabled:a}=e,t=o.filter((e=>!!e.props.bindGroup&&(e.props.disabled&&a?e.checked.value:null!=l?l:!e.checked.value))).map((e=>e.name));s(t)}}),m((()=>e.modelValue)),t({props:e,updateValue:s}),()=>{var l;return u("div",{class:te([e.direction])},[null==(l=a.default)?void 0:l.call(a)])}}});const[ue,re]=e("checkbox");const de=d(t({name:ue,props:h({},le,{bindGroup:a}),emits:["change","update:modelValue"],setup(e,{emit:l,slots:a}){const{parent:o}=y(se),t=f((()=>o&&e.bindGroup?-1!==o.props.modelValue.indexOf(e.name):!!e.modelValue)),n=(a=!t.value)=>{o&&e.bindGroup?(l=>{const{name:a}=e,{max:t,modelValue:n}=o.props,s=n.slice();if(l)t&&s.length>=t||s.includes(a)||(s.push(a),e.bindGroup&&o.updateValue(s));else{const l=s.indexOf(a);-1!==l&&(s.splice(l,1),e.bindGroup&&o.updateValue(s))}})(a):l("update:modelValue",a)};return S((()=>e.modelValue),(e=>l("change",e))),i({toggle:n,props:e,checked:t}),m((()=>e.modelValue)),()=>u(ae,C({bem:re,role:"checkbox",parent:o,checked:t.value,onToggle:n},e),x(a,["default","icon"]))}})),ce=d(ie),[me,pe]=e("rate");const ve=d(t({name:me,props:{size:l,icon:o("star"),color:String,count:w(5),gutter:l,readonly:Boolean,disabled:Boolean,voidIcon:o("star-o"),allowHalf:Boolean,voidColor:String,touchable:a,iconPrefix:String,modelValue:B(0),disabledColor:String},emits:["change","update:modelValue"],setup(e,{emit:l}){const a=P(),[o,t]=Y(),n=g(),s=()=>e.readonly||e.disabled||!e.touchable,i=f((()=>Array(+e.count).fill("").map(((l,a)=>function(e,l,a,o){if(e>=l)return{status:"full",value:1};if(e+.5>=l&&a&&!o)return{status:"half",value:.5};if(e+1>=l&&a&&o){const a=10**10;return{status:"half",value:Math.round((e-l+1)*a)/a}}return{status:"void",value:0}}(e.modelValue,a+1,e.allowHalf,e.readonly)))));let d,c,v=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;const b=()=>{c=z(n);const l=o.value.map(z);d=[],l.forEach(((l,a)=>{v=Math.min(l.top,v),h=Math.max(l.top,h),e.allowHalf?d.push({score:a+.5,left:l.left,top:l.top,height:l.height},{score:a+1,left:l.left+l.width/2,top:l.top,height:l.height}):d.push({score:a+1,left:l.left,top:l.top,height:l.height})}))},k=(l,a)=>{for(let e=d.length-1;e>0;e--)if(a>=c.top&&a<=c.bottom){if(l>d[e].left&&a>=d[e].top&&a<=d[e].top+d[e].height)return d[e].score}else{const o=a<c.top?v:h;if(l>d[e].left&&d[e].top===o)return d[e].score}return e.allowHalf?.5:1},S=a=>{e.disabled||e.readonly||a===e.modelValue||(l("update:modelValue",a),l("change",a))},y=e=>{s()||(a.start(e),b())},x=e=>{if(!s()&&(a.move(e),a.isHorizontal())){const{clientX:l,clientY:a}=e.touches[0];r(e),S(k(l,a))}},C=(l,a)=>{const{icon:o,size:n,color:s,count:i,gutter:r,voidIcon:d,disabled:c,voidColor:m,allowHalf:v,iconPrefix:h,disabledColor:g}=e,f=a+1,y="full"===l.status,x="void"===l.status,C=v&&l.value>0&&l.value<1;let w;r&&f!==+i&&(w={paddingRight:p(r)});return u("div",{key:a,ref:t(a),role:"radio",style:w,class:pe("item"),tabindex:c?void 0:0,"aria-setsize":i,"aria-posinset":f,"aria-checked":!x,onClick:e=>{b(),S(v?k(e.clientX,e.clientY):f)}},[u(V,{size:n,name:y?o:d,class:pe("icon",{disabled:c,full:y}),color:c?g:y?s:m,classPrefix:h},null),C&&u(V,{size:n,style:{width:l.value+"em"},name:x?d:o,class:pe("icon",["half",{disabled:c,full:!x}]),color:c?g:x?m:s,classPrefix:h},null)])};return m((()=>e.modelValue)),()=>u("div",{ref:n,role:"radiogroup",class:pe({readonly:e.readonly,disabled:e.disabled}),tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,"aria-readonly":e.readonly,onTouchstart:y,onTouchmove:x},[i.value.map(C)])}})),[he,be]=e("stepper"),ge=(e,l)=>String(e)===String(l);const fe=d(t({name:he,props:{min:w(1),max:w(1/0),name:w(""),step:w(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:a,showMinus:a,showInput:a,longPress:a,allowEmpty:Boolean,modelValue:l,inputWidth:l,buttonSize:l,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:w(1),decimalLength:l},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:l}){const a=l=>{const{min:a,max:o,allowEmpty:t,decimalLength:n}=e;return t&&""===l||(l=""===(l=I(String(l),!e.integer))?0:+l,l=Number.isNaN(l)?+a:l,l=Math.max(Math.min(+o,l),+a),F(n)&&(l=l.toFixed(+n))),l};let o;const t=g(),n=g((()=>{var o;const t=null!=(o=e.modelValue)?o:e.defaultValue,n=a(t);return ge(n,e.modelValue)||l("update:modelValue",n),n})()),s=f((()=>e.disabled||e.disableMinus||n.value<=+e.min)),i=f((()=>e.disabled||e.disablePlus||n.value>=+e.max)),d=f((()=>({width:p(e.inputWidth),height:p(e.buttonSize)}))),c=f((()=>T(e.buttonSize))),v=l=>{e.beforeChange?j(e.beforeChange,{args:[l],done(){n.value=l}}):n.value=l},h=()=>{if("plus"===o&&i.value||"minus"===o&&s.value)return void l("overlimit",o);const t="minus"===o?-e.step:+e.step,u=a(M(+n.value,t));v(u),l(o)},b=l=>{const a=l.target,{value:o}=a,{decimalLength:t}=e;let s=I(String(o),!e.integer);if(F(t)&&s.includes(".")){const e=s.split(".");s=`${e[0]}.${e[1].slice(0,+t)}`}e.beforeChange?a.value=String(n.value):ge(o,s)||(a.value=s);const i=s===String(+s);v(i?+s:s)},V=a=>{var o;e.disableInput?null==(o=t.value)||o.blur():l("focus",a)},k=e=>{const o=e.target,t=a(o.value);o.value=String(t),n.value=t,A((()=>{l("blur",e),N()}))};let y,x;const w=()=>{x=setTimeout((()=>{h(),w()}),200)},B=l=>{e.longPress&&(clearTimeout(x),y&&r(l))},P=l=>{e.disableInput&&r(l)},z=l=>({onClick:e=>{r(e),o=l,h()},onTouchstart:()=>{o=l,e.longPress&&(y=!1,clearTimeout(x),x=setTimeout((()=>{y=!0,h(),w()}),600))},onTouchend:B,onTouchcancel:B});return S((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=a(n.value);ge(e,n.value)||(n.value=e)})),S((()=>e.modelValue),(e=>{ge(e,n.value)||(n.value=a(e))})),S(n,(a=>{l("update:modelValue",a),l("change",a,{name:e.name})})),m((()=>e.modelValue)),()=>u("div",{role:"group",class:be([e.theme])},[_(u("button",C({type:"button",style:c.value,class:[be("minus",{disabled:s.value}),{[G]:!s.value}],"aria-disabled":s.value||void 0},z("minus")),null),[[E,e.showMinus]]),_(u("input",{ref:t,type:e.integer?"tel":"text",role:"spinbutton",class:be("input"),value:n.value,style:d.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":n.value,onBlur:k,onInput:b,onFocus:V,onMousedown:P},null),[[E,e.showInput]]),_(u("button",C({type:"button",style:c.value,class:[be("plus",{disabled:i.value}),{[G]:!i.value}],"aria-disabled":i.value||void 0},z("plus")),null),[[E,e.showPlus]])])}}));const Ve={class:"h-screen bg-999 w-full py-20px overflow-auto"},ke=O("复选框 1"),Se=O("复选框 2"),ye={style:{margin:"16px"}},xe=O(" 提交 "),Ce=t({setup(e){const l=g({value1:"",value2:"",value3:"",value4:"",isSelect:!1,isChecked:!1,GroupChecked:[],stepperValue:"",rateValue:4,sliderValue:20}),a=/\d{6}/,o=()=>{},t=e=>{};return(e,n)=>{const s=X,i=ee,r=de,d=ce,c=fe,m=ve,p=R,v=H,h=W,b=K;return U(),L("div",Ve,[u(b,{onFailed:t},{default:q((()=>[u(v,{inset:""},{default:q((()=>[u(s,{modelValue:l.value.value1,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value.value1=e),name:"pattern",placeholder:"正则校验",rules:[{pattern:a,message:"请输入正确内容"}]},null,8,["modelValue","rules"]),u(s,{name:"switch",label:"开关"},{input:q((()=>[u(i,{modelValue:l.value.isSelect,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value.isSelect=e),size:"20"},null,8,["modelValue"])])),_:1}),u(s,{name:"checkbox",label:"复选框"},{input:q((()=>[u(r,{modelValue:l.value.isChecked,"onUpdate:modelValue":n[2]||(n[2]=e=>l.value.isChecked=e),shape:"square"},null,8,["modelValue"])])),_:1}),u(s,{name:"checkboxGroup",label:"复选框组"},{input:q((()=>[u(d,{modelValue:l.value.GroupChecked,"onUpdate:modelValue":n[3]||(n[3]=e=>l.value.GroupChecked=e),direction:"horizontal"},{default:q((()=>[u(r,{name:"1",shape:"square"},{default:q((()=>[ke])),_:1}),u(r,{name:"2",shape:"square"},{default:q((()=>[Se])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(s,{name:"stepper",label:"步进器"},{input:q((()=>[u(c,{modelValue:l.value.stepperValue,"onUpdate:modelValue":n[4]||(n[4]=e=>l.value.stepperValue=e)},null,8,["modelValue"])])),_:1}),u(s,{name:"rate",label:"评分"},{input:q((()=>[u(m,{modelValue:l.value.rateValue,"onUpdate:modelValue":n[5]||(n[5]=e=>l.value.rateValue=e)},null,8,["modelValue"])])),_:1}),u(s,{name:"slider",label:"滑块"},{input:q((()=>[u(p,{modelValue:l.value.sliderValue,"onUpdate:modelValue":n[6]||(n[6]=e=>l.value.sliderValue=e)},null,8,["modelValue"])])),_:1})])),_:1}),D("div",ye,[u(h,{round:"",block:"",type:"primary","native-type":"submit",onClick:o},{default:q((()=>[xe])),_:1})])])),_:1})])}}});export{Ce as default};
